```markdown
# 文本相似度處理器

此專案用於處理指定資料夾中的 `.md` 文件，對每行內容進行正則匹配與特徵提取，並生成包含處理結果的 `.txt` 文件。專案基於 OpenAI 的 CLIP 模型對文本特徵進行相似度計算，以完成數據處理和結果輸出。

## 功能

- 從指定資料夾讀取 `.md` 文件內容。
- 提取文件中的特徵，例如性別、種族和年齡等關鍵屬性。
- 生成包含提取資訊的 `.txt` 文件作為輸出。
- 可在命令行指定輸入和輸出資料夾路徑，靈活性高。

## 環境依賴

### Python 版本

請使用 Python 3.8 或更高版本。

### 安裝依賴

在專案目錄下，執行以下命令以安裝所需的依賴：

```bash
pip install -r requirements.txt
```

## 文件結構

- `process_text_similarity.py` - 主程式文件，包含文本處理和相似度計算邏輯。
- `requirements.txt` - 列出所需的 Python 套件。
- `README.md` - 專案說明文件。

## 使用說明

### 命令行參數

運行該腳本時，需要通過命令行指定輸入資料夾和輸出資料夾路徑。具體命令格式如下：

```bash
python process_text_similarity.py <input_folder> <output_folder>
```

- `<input_folder>`：包含 `.md` 文件的資料夾路徑。
- `<output_folder>`：處理後 `.txt` 文件的輸出路徑。

### 範例

假設您的輸入資料夾路徑為 `50result/50generate/prompt2`，輸出資料夾路徑為 `./50generate`，則命令如下：

```bash
python process_text_similarity.py 50result/50generate/prompt2 ./50generate
```

### 輸出結果

- 執行後，生成的 `.txt` 文件將保存在指定的輸出資料夾中，文件名格式為原 `.md` 文件名去除特定前綴後的識別碼。
- 每個 `.txt` 文件包含處理後的屬性資訊，並使用逗號分隔。

## 程式碼結構

### 主要邏輯

- 使用正則表達式提取每行的特定屬性，例如 `Gender`、`Race` 和 `Age` 等。
- 基於 OpenAI 的 CLIP 模型計算文本特徵，並使用餘弦相似度對比文件內容相似性。
- 將提取的資訊格式化後保存到指定的輸出資料夾。

## 依賴套件

- `torch`：用於處理張量操作及模型推理。
- `transformers`：用於載入和操作 CLIP 模型和分詞器。

## 注意事項

- 輸入的 `.md` 文件需符合特定格式，每行必須包含加粗的屬性關鍵字和對應的描述資訊，否則無法正確解析。
- 若輸出目錄不存在，程式將自動創建。

## 常見問題

**1. 無法匹配文件內容？**

檢查 `.md` 文件的格式是否符合正則表達式的要求，例如屬性名必須為加粗格式且有序號前綴。

**2. 缺少依賴？**

確保使用 `requirements.txt` 安裝了所有依賴項。若有問題，嘗試 `pip install torch transformers` 以單獨安裝關鍵套件。

## 授權

本專案僅供學習與研究用途，遵循 MIT 授權條款。
```

這個 `README.md` 文件提供了專案的詳細介紹、安裝與使用方法，以及注意事項，適合繁體中文的使用者。